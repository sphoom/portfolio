<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Insurance Risk and Pricing Analysis</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/vs2015.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js"></script>
    
    <style>
      /* Reset and base styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Inter', sans-serif;
      }
    
      body {
        background-color: #ffffff;
        color: #333;
        line-height: 1.7;
        font-size: 16px;
      }
    
      .container {
        max-width: 1140px;
        margin: 0 auto;
        padding: 0 20px;
      }
    
      /* Typography improvements */
      p {
        margin-bottom: 1.5rem;
        font-size: 16px;
        color: #444;
      }
    
      h2 {
        font-size: 28px;
        margin: 40px 0 20px;
        color: #1E88E5;
        padding-bottom: 8px;
        border-bottom: 2px solid #f0f0f0;
      }
    
      h3 {
        font-size: 22px;
        margin: 30px 0 15px;
        color: #444;
      }
    
      ul, ol {
        margin: 0 0 1.5rem 1.5rem;
      }
    
      li {
        margin-bottom: 0.7rem;
      }
    
      /* Navigation */
      .nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 0;
        border-bottom: 1px solid #f0f0f0;
        margin-bottom: 20px;
      }
    
      .nav-logo {
        font-size: 26px;
        font-weight: 700;
        color: #1E88E5;
      }
    
      .nav-links {
        display: flex;
        gap: 30px;
      }
    
      .nav-links a {
        color: #1E88E5;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.3s;
      }
    
      .nav-links a:hover {
        color: #00ACC1;
      }
    
      /* Project Header */
      .project-header {
        padding: 40px 0 30px;
      }
    
      .breadcrumb {
        display: flex;
        gap: 10px;
        font-size: 14px;
        margin-bottom: 20px;
        color: #666;
      }
    
      .breadcrumb a {
        color: #1E88E5;
        text-decoration: none;
      }
    
      .project-title {
        font-size: 36px;
        color: #1E88E5;
        margin-bottom: 20px;
        line-height: 1.2;
      }
    
      .project-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-bottom: 30px;
        color: #666;
        font-size: 14px;
      }
    
      .meta-item {
        display: flex;
        align-items: center;
        gap: 8px;
      }
    
      /* Project Banner */
      .project-banner {
        width: 100%;
        height: 300px;
        background: linear-gradient(45deg, #1E88E5, #00ACC1);
        border-radius: 12px;
        margin-bottom: 40px;
        position: relative;
        overflow: hidden;
      }
    
      .banner-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.3);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        color: white;
      }
    
      .banner-title {
        font-size: 32px;
        font-weight: 600;
        margin-bottom: 10px;
      }
    
      .banner-subtitle {
        font-size: 18px;
        opacity: 0.9;
      }
    
      /* Project Content */
      .project-content {
        display: grid;
        grid-template-columns: 7fr 3fr;
        gap: 40px;
        margin-bottom: 60px;
      }
    
      /* Main content with overflow control */
      .main-content {
        overflow-x: hidden;
        max-width: 100%;
      }
    
      .main-content h2 {
        margin-top: 40px;
      }
    
      .main-content h2:first-child {
        margin-top: 0;
      }
    
      /* Improve visibility of links */
      .main-content a {
        color: #1E88E5;
        text-decoration: none;
        font-weight: 500;
        border-bottom: 1px solid transparent;
        transition: border-color 0.3s;
      }
    
      .main-content a:hover {
        border-color: #1E88E5;
      }
    
      /* Image containers with better spacing */
      .chart-container {
        background: white;
        border: 1px solid #eee;
        border-radius: 8px;
        padding: 25px;
        margin: 30px 0;
        text-align: center;
        box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      }
    
      .chart-container img {
        max-width: 90%;
        height: auto;
        border-radius: 4px;
      }
    
      .chart-container p {
        margin-top: 15px;
        margin-bottom: 0;
        color: #777;
        font-style: italic;
        font-size: 14px;
      }
    
      /* Table styling */
      .data-table {
        width: 100%;
        border-collapse: collapse;
        margin: 25px 0 35px;
        font-size: 15px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        border-radius: 8px;
        overflow: hidden;
      }
    
      .data-table th {
        background-color: rgba(30, 136, 229, 0.1);
        color: #1E88E5;
        text-align: left;
        padding: 15px;
        font-weight: 600;
      }
    
      .data-table td {
        border-bottom: 1px solid #eee;
        padding: 15px;
        color: #444;
      }
    
      .data-table tr:last-child td {
        border-bottom: none;
      }
    
      .data-table tr:hover td {
        background-color: rgba(0,0,0,0.01);
      }
    
      /* Sidebar improvements */
      .sidebar {
        position: sticky;
        top: 30px;
        height: calc(100vh - 60px);
        overflow-y: auto;
        z-index: 10;
      }
    
      .sidebar-box {
        background: rgba(30, 136, 229, 0.05);
        border: 1px solid rgba(30, 136, 229, 0.1);
        border-radius: 12px;
        padding: 25px;
        margin-bottom: 30px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.03);
      }
    
      .sidebar-title {
        font-size: 18px;
        margin-bottom: 20px;
        color: #1E88E5;
        padding-bottom: 10px;
        border-bottom: 1px solid rgba(30, 136, 229, 0.1);
      }
    
      .tech-list {
        margin-bottom: 25px;
      }
    
      .tech-tag {
        display: inline-block;
        background: rgba(30, 136, 229, 0.1);
        border: 1px solid rgba(30, 136, 229, 0.2);
        color: #1E88E5;
        padding: 6px 12px;
        border-radius: 50px;
        font-size: 13px;
        margin: 0 5px 10px 0;
        font-weight: 500;
      }
    
      .project-links {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
    
      .project-btn {
        padding: 12px 15px;
        border-radius: 6px;
        text-decoration: none;
        font-size: 14px;
        text-align: center;
        font-weight: 500;
        display: block;
        transition: transform 0.2s, box-shadow 0.2s;
      }
    
      .project-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      }
    
      .btn-primary {
        background: linear-gradient(90deg, #1E88E5, #00ACC1);
        color: white;
      }
    
      .btn-secondary {
        background: rgba(0, 0, 0, 0.05);
        color: #444;
      }
    
      .table-of-contents {
        max-height: calc(100vh - 180px);
        overflow-y: auto;
        scrollbar-width: thin;
      }
    
      .table-of-contents::-webkit-scrollbar {
        width: 4px;
      }
    
      .table-of-contents::-webkit-scrollbar-thumb {
        background-color: rgba(30, 136, 229, 0.3);
        border-radius: 4px;
      }
    
      .table-of-contents li {
        margin-bottom: 12px;
        line-height: 1.4;
      }
    
      .table-of-contents a {
        color: #1E88E5;
        text-decoration: none;
        transition: color 0.2s, padding-left 0.2s;
        display: block;
        padding-left: 0;
      }
    
      .table-of-contents a:hover {
        color: #00ACC1;
        padding-left: 5px;
      }
    
      /* Code toggle styling */
      .code-toggle-btn {
        display: inline-flex;
        align-items: center;
        background: rgba(30, 136, 229, 0.08);
        border: 1px solid rgba(30, 136, 229, 0.2);
        color: #1E88E5;
        padding: 10px 18px;
        border-radius: 6px;
        font-size: 15px;
        margin: 15px 0;
        cursor: pointer;
        gap: 10px;
        font-weight: 500;
        transition: background-color 0.2s;
      }
    
      .code-toggle-btn:hover {
        background: rgba(30, 136, 229, 0.12);
      }
    
      /* Code content container */
      .code-content {
        position: relative;
        z-index: 1;
        background: #f9fbff;
        border: 1px solid #e0e9f5;
        border-radius: 10px;
        padding: 25px;
        margin: 25px 0;
        display: none;
        color: #333;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        overflow-x: auto;
        max-width: 100%;
      }
    
      /* Code tabs styling */
      .code-tabs {
        display: flex;
        flex-wrap: wrap;
        gap: 5px;
        margin-bottom: 20px;
        border-bottom: 1px solid #e1e4e8;
        padding-bottom: 1px;
      }
    
      .code-tab {
        padding: 8px 16px;
        cursor: pointer;
        border: 1px solid #e1e4e8;
        border-bottom: none;
        margin-bottom: -1px;
        border-top-left-radius: 6px;
        border-top-right-radius: 6px;
        color: #1E88E5;
        font-size: 14px;
        transition: all 0.2s ease;
        background-color: rgba(30, 136, 229, 0.05);
      }
    
      .code-tab.active {
        background-color: #f8f9fa;
        border-bottom: 2px solid #1E88E5;
        color: #1E88E5;
        font-weight: 500;
      }
    
      .code-tab:hover:not(.active) {
        background-color: rgba(30, 136, 229, 0.1);
      }
    
      /* Code panel styling */
      .code-panel {
        display: none;
        max-width: 100%;
        overflow-x: hidden;
      }
    
      .code-panel.active {
        display: block;
      }
    
      /* Pre and code styling */
      pre {
        margin: 0;
        max-width: 100%;
      }
    
      pre code, pre code.python {
        display: block;
        white-space: pre;
        overflow-x: auto;
        word-wrap: normal;
        max-width: 100%;
        background: #282c34; /* Dark background for better contrast */
        color: #abb2bf; /* Light gray for main text */
        border: 1px solid #1e232a;
        border-radius: 8px;
        padding: 20px;
        font-family: "JetBrains Mono", "Fira Code", "Consolas", "Monaco", "Courier New", monospace;
        font-size: 14px;
        line-height: 1.6;
        letter-spacing: 0.5px;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      }
    
      /* Scrollbar styling */
      .code-content::-webkit-scrollbar,
      pre::-webkit-scrollbar,
      pre code::-webkit-scrollbar {
        height: 8px;
      }
    
      .code-content::-webkit-scrollbar-thumb,
      pre::-webkit-scrollbar-thumb,
      pre code::-webkit-scrollbar-thumb {
        background-color: rgba(30, 136, 229, 0.3);
        border-radius: 4px;
      }
    
      .code-content::-webkit-scrollbar-track,
      pre::-webkit-scrollbar-track,
      pre code::-webkit-scrollbar-track {
        background-color: rgba(0, 0, 0, 0.05);
      }
    
      /* Output container styling */
      .output-container {
        margin-top: 20px;
        background: #f0f7ff;
        border: 1px solid #d0e3f7;
        border-radius: 6px;
        padding: 15px;
        max-width: 100%;
      }
    
      .output-text {
        background: #fff;
        border: 1px solid #eee;
        border-radius: 4px;
        padding: 10px;
        font-family: "Consolas", "Monaco", "Courier New", monospace;
        font-size: 13px;
        line-height: 1.4;
        overflow-x: auto;
        margin-bottom: 15px;
        color: #333;
        white-space: pre-wrap;
      }
    
      /* Syntax highlighting color scheme - One Dark inspired */
      .hljs-keyword {
        color: #c678dd !important; /* Purple for keywords */
        font-weight: 600;
      }
    
      .hljs-built_in {
        color: #56b6c2 !important; /* Cyan for built-in functions */
      }
    
      .hljs-type {
        color: #e5c07b !important; /* Yellow for types */
      }
    
      .hljs-literal {
        color: #d19a66 !important; /* Orange for literals */
      }
    
      .hljs-number {
        color: #d19a66 !important; /* Orange for numbers */
      }
    
      .hljs-regexp {
        color: #98c379 !important; /* Green for regexps */
      }
    
      .hljs-string {
        color: #98c379 !important; /* Green for strings */
      }
    
      .hljs-comment {
        color: #7f848e !important; /* Darker gray for comments */
        font-style: italic;
      }
    
      .hljs-doctag {
        color: #c678dd !important; /* Purple for doc tags */
      }
    
      .hljs-meta {
        color: #61afef !important; /* Blue for meta info */
      }
    
      .hljs-tag {
        color: #e06c75 !important; /* Red for tags */
      }
    
      .hljs-attr {
        color: #d19a66 !important; /* Orange for attributes */
      }
    
      .hljs-function .hljs-title, 
      .hljs-title.function {
        color: #61afef !important; /* Blue for function names */
        font-weight: 600;
      }
    
      .hljs-class .hljs-title, 
      .hljs-title.class {
        color: #e5c07b !important; /* Yellow for class names */
        font-weight: 600;
      }
    
      .hljs-section {
        color: #61afef !important; /* Blue for sections */
        font-weight: 600;
      }
    
      .hljs-selector-tag {
        color: #c678dd !important; /* Purple for selector tags */
      }
    
      .hljs-selector-id {
        color: #e06c75 !important; /* Red for selector IDs */
      }
    
      .hljs-selector-class {
        color: #d19a66 !important; /* Orange for selector classes */
      }
    
      .hljs-variable {
        color: #e06c75 !important; /* Red for variables */
      }
    
      /* Line highlighting (for important lines) */
      .hljs-line-highlight {
        background-color: rgba(97, 175, 239, 0.1);
        display: block;
        margin-right: -20px;
        margin-left: -20px;
        padding-right: 20px;
        padding-left: 16px;
        border-left: 4px solid #61afef;
      }
    
      /* Add subtle line numbers (needs additional markup) */
      .code-with-line-numbers {
        counter-reset: line;
        padding-left: 1em;
      }
    
      .code-with-line-numbers .line {
        position: relative;
        display: block;
      }
    
      .code-with-line-numbers .line:before {
        counter-increment: line;
        content: counter(line);
        position: absolute;
        left: -2em;
        color: #5c6370;
        text-align: right;
        width: 1.5em;
      }
    
      /* Add a title/label for code blocks */
      .code-title {
        font-family: "Inter", sans-serif;
        font-size: 14px;
        font-weight: 600;
        color: #abb2bf;
        background: #21252b;
        border: 1px solid #282c34;
        border-bottom: none;
        border-radius: 8px 8px 0 0;
        padding: 8px 15px;
        display: inline-block;
        margin-bottom: -1px;
        position: relative;
        z-index: 5;
      }

    /* Jupyter-style output container with code syntax highlighting */
    .output-container {
      margin-top: 20px;
      background: #282c34; /* Same dark background as code blocks */
      border: 1px solid #1e232a;
      border-radius: 6px;
      padding: 15px;
      max-width: 100%;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
    }

    .output-text {
      background: #21252b; /* Slightly lighter than the container */
      border: 1px solid #1e232a;
      border-radius: 4px;
      padding: 15px;
      font-family: "JetBrains Mono", "Fira Code", "Consolas", "Monaco", "Courier New", monospace;
      font-size: 14px;
      line-height: 1.5;
      overflow-x: auto;
      margin-bottom: 0;
      color: #abb2bf; /* Same light text color as code */
      white-space: pre;
    }

    /* Add a title to the output container similar to Jupyter's "Out[n]:" */
    .output-label {
      font-family: "JetBrains Mono", "Fira Code", "Consolas", "Monaco", "Courier New", monospace;
      font-size: 12px;
      font-weight: 600;
      color: #61afef; /* Blue color matching function names */
      margin-bottom: 5px;
      display: block;
    }

    /* Style for numeric output values */
    .output-number {
      color: #d19a66; /* Orange color for numbers */
    }

    /* Style for string output values */
    .output-string {
      color: #98c379; /* Green color for strings */
    }

    .output-plot img, .output-image {
      max-width: 60%;
      height: auto;
      margin-bottom: 10px;
    }

    /* Optional: Add a separator between code and output */
    .code-output-separator {
      height: 1px;
      background: #3e4451;
      margin: 10px 0;
      border: none;
    }

    /* Scrollbar styling for output */
    .output-text::-webkit-scrollbar {
      height: 8px;
      width: 8px;
    }

    .output-text::-webkit-scrollbar-thumb {
      background-color: #4d5566;
      border-radius: 4px;
    }

    .output-text::-webkit-scrollbar-track {
      background-color: #282c34;
    }
    
      /* Results section */
      .results-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 25px;
        margin: 25px 0 35px;
      }
    
      .result-card {
        background: #282c34; /* Same dark background as code blocks */
        border: 1px solid #1e232a;
        border-radius: 10px;
        padding: 25px;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        color: #abb2bf; /* Light text color matching code */
        overflow: hidden;
      }
    
      .result-card h4 {
        font-size: 18px;
        margin-bottom: 15px;
        color: #61afef; /* Blue color matching function names in code */
        font-weight: 600;
        border-bottom: 1px solid #3e4451;
        padding-bottom: 10px;
      }

      .result-card p {
        font-size: 14px;
        line-height: 1.6;
        color: #abb2bf; /* Same color as main code text */
        margin-bottom: 15px;
      }
          
      .stat {
        font-size: 36px;
        font-weight: 700;
        margin: 15px 0;
        color: #98c379; /* Green color matching strings in code */
        font-family: "JetBrains Mono", "Fira Code", "Consolas", "Monaco", "Courier New", monospace;
      }
          
      /* Related projects */
      .related-projects-title {
        font-size: 28px;
        margin: 60px 0 30px;
        color: #1E88E5;
        text-align: center;
      }

      .result-badge {
        display: inline-block;
        background: rgba(97, 175, 239, 0.1);
        color: #61afef;
        font-size: 12px;
        padding: 4px 10px;
        border-radius: 4px;
        font-weight: 500;
        margin-top: 10px;
      }
    
      .related-projects {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 25px;
        margin-bottom: 60px;
      }
    
      .related-card {
        background: white;
        border: 1px solid #eee;
        border-radius: 10px;
        overflow: hidden;
        transition: transform 0.3s, box-shadow 0.3s;
        text-decoration: none;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      }
    
      .related-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 16px rgba(0,0,0,0.1);
      }
    
      .related-img {
        height: 120px;
        background: linear-gradient(45deg, #1E88E5, #00ACC1);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 500;
        font-size: 18px;
      }
    
      .related-content {
        padding: 20px;
      }
    
      .related-title {
        font-size: 18px;
        margin-bottom: 10px;
        color: #1E88E5;
      }
    
      .related-desc {
        font-size: 14px;
        color: #555;
        line-height: 1.5;
      }
    
      /* Footer */
      .footer {
        text-align: center;
        padding: 40px 0;
        color: #1E88E5;
        margin-top: 60px;
        border-top: 1px solid #f0f0f0;
      }
    
      /* Visualization placeholder */
      .viz-placeholder {
        background-color: #f5f7fa;
        border: 2px dashed #cfd8dc;
        border-radius: 8px;
        height: 300px;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 25px 0;
        flex-direction: column;
      }
    
      .viz-placeholder svg {
        margin-bottom: 15px;
        color: #90a4ae;
      }
    
      .viz-placeholder p {
        margin: 0;
        color: #607d8b;
        font-size: 16px;
        text-align: center;
      }
    
      /* Responsive styles */
      @media (max-width: 900px) {
        .project-content {
          grid-template-columns: 1fr;
        }
        
        .sidebar {
          position: static;
        }
        
        .results-grid {
          grid-template-columns: 1fr;
        }
        
        .related-projects {
          grid-template-columns: 1fr;
        }
        
        .project-title {
          font-size: 30px;
        }
        
        .banner-title {
          font-size: 26px;
        }
        
        .nav {
          flex-direction: column;
          gap: 15px;
        }
        
        .project-meta {
          flex-direction: column;
          gap: 10px;
        }
        .code-tabs {
          flex-direction: column;
          border-bottom: none;
          gap: 5px;
        }
        
        .code-tab {
          margin-bottom: 0;
          border: 1px solid #e1e4e8;
          border-radius: 4px;
        }
        
        .code-tab.active {
          border-bottom: 1px solid #1E88E5;
        }
        
        .output-container {
          padding: 10px;
        }
        
        pre code, pre code.python {
          font-size: 13px;
          padding: 15px;
        }
        
        .code-title {
          font-size: 12px;
        }
        .results-grid {
          grid-template-columns: 1fr;
        }
        
        .result-card {
          padding: 20px;
        }
        
        .stat {
          font-size: 30px;
        }
      }
    </style>
  <head>
  <body>
    <div class="container">
      <!-- Navigation -->
      <nav class="nav">
        <div class="nav-logo">SM.</div>
        <div class="nav-links">
          <a href="../index.html">Home</a>
          <a href="../projects.html">Projects</a>
          <a href="../contact.html">Contact</a>
        </div>
      </nav>
      
      <!-- Project Header -->
      <header class="project-header">
        <div class="breadcrumb">
          <a href="../index.html">Home</a> / 
          <a href="../projects.html">Projects</a> / 
          <span>Insurance Charges Prediction and Analysis</span>
        </div>
  
        <h1 class="project-title">Insurance Charges Prediction and Analysis</h1>
        
        <div class="project-meta">
          <div class="meta-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#1E88E5" viewBox="0 0 16 16">
              <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
            </svg>
            Healthcare Analytics
          </div>
          <div class="meta-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#1E88E5" viewBox="0 0 16 16">
              <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>
            </svg>
            Predictive Modeling
          </div>
        </div>
      </header>
      
      <!-- Project Banner -->
      <div class="project-banner">
        <img src="../projects/image/insurance_banner.png" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;" alt="Insurnce Charges Prediction Banner">
        <div class="banner-overlay">
          <div class="banner-title">Predictive Modeling</div>
          <div class="banner-subtitle">Predictive Modeling for Cost Estimation and Customer Segmentation</div>
        </div>
      </div>
      
      <!-- Project Content -->
      <div class="project-content">
        <div class="main-content">
          <h2 id="overview">Executive Summary</h2>
          <p>
            For a health insurance provider seeking to optimize their pricing strategies and customer segmentation, I developed a comprehensive analytics solution that delivers actionable insights through predictive modeling, statistical analysis, and customer segmentation.
          </p>
          <p>
            Key project achievements include:
          </p>
          <ul>
            <li>Built predictive models to estimate customer insurance charges with high accuracy (best model R² = 0.86)</li>
            <li>Performed rigorous statistical testing to quantify the cost impact of key factors such as smoking status, BMI, and regional differences</li>
            <li>Segmented customers into 4 distinct clusters to inform pricing tiers and personalized marketing strategies</li>
          </ul>

          <h2 id="business-context">Business Context & Objectives</h2>
          <p>
            Health insurance pricing relies on accurate risk assessment and customer segmentation. However, many providers struggle to identify the most significant cost drivers and create tailored offerings that balance profitability with customer value.
          </p>
          <p>
            This project aims to help an insurance provider better understand the drivers of insurance costs and identify strategic opportunities in three key areas:
          </p>
          <ul>
            <li><strong>Predictive Pricing:</strong> Can we accurately predict how much a customer will be charged?</li>
            <li><strong>Risk Assessment:</strong> Which factors most significantly influence insurance costs?</li>
            <li><strong>Customer Segmentation:</strong> Can we identify distinct customer groups for targeted pricing and marketing?</li>
          </ul>

          <h2 id="data-overview">Data Overview</h2>
          <p>
            The analysis is based on a dataset containing information from over 1,300 insurance customers with the following features:
          </p>
          <ul>
            <li><strong>Demographics:</strong> Age, sex, BMI (Body Mass Index)</li>
            <li><strong>Household Information:</strong> Number of children</li>
            <li><strong>Lifestyle Factors:</strong> Smoker status (yes/no)</li>
            <li><strong>Geographic Data:</strong> Region (northeast, northwest, southeast, southwest)</li>
            <li><strong>Target Variable:</strong> Insurance charges (annual cost in USD)</li>
          </ul>
          
          
          <!-- Visualization Placeholder for Charges Distribution -->
          <div class="chart-container">
            <img src="../projects/image/insurance_pairplot.png" alt="Charges Distribution Visualization">
            <p>Insurance charges showing significant right skew and bimodal pattern</p>
          </div>
          
          <ul>
            <li><strong>Skewed Distribution:</strong> Insurance charges are heavily right-skewed with a clear bimodal pattern, suggesting distinct risk groups. Logrithm of `Charges` is used instead (see `EDA+plot` inside toggle section for distributin of Charges without log)</li>
            <li><strong>Smoker Impact:</strong> Smoking status shows the strongest relationship with charges, creating a clear separation between high and low-cost customers</li>
            <li><strong>Age Correlation:</strong> Insurance costs show a positive correlation with age (r = 0.30), although this relationship is modified by other factors</li>
            <li><strong>BMI Effect:</strong> Higher BMI correlates with increased charges, particularly among smokers</li>
            <li><strong>Regional Variations:</strong> Some regional differences exist, though they appear less pronounced than lifestyle factors</li>
          </ul>
          
          <!-- Visualization Placeholder for Correlation Matrix -->
          <div class="chart-container">
            <img src="../projects/image/insurance_coor.png" alt="Charges Distribution Visualization">
            <p>Correlation Matrix: Showing relationships between key variables and insurance charges</p>
          </div>
          
          <button class="code-toggle-btn" onclick="toggleCodeSection('edaCode')">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
              <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
              <path d="M6.854 4.646a.5.5 0 0 1 0 .708L4.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0zm2.292 0a.5.5 0 0 0 0 .708L11.793 8l-2.647 2.646a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708 0z"/>
            </svg>
            Show EDA Code
          </button>
          
          <div id="edaCode" class="code-content">
            <div class="code-tabs">
              <div class="code-tab active" onclick="changeCodeTab('EDA', this)">EDA</div>
              <div class="code-tab" onclick="changeCodeTab('EDA_Plot', this)">EDA Plot</div>
            </div>

            <div id="EDA" class="code-panel active">
              <pre><code class="python">
                print(df.describe())
                print(df.info())
                print(df.isna().sum())
                print(df.duplicated())
                df = df.drop_duplicates()
                df = df.dropna()
              </code></pre>

              <div class="output-container">
                <span class="output-label">Out[1]:</span>
                <pre class="output-text">
                              age          bmi     children       charges
                  count  1338.000000  1338.000000  1338.000000   1338.000000
                  mean     39.207025    30.663397     1.094918  13270.422265
                  std      14.049960     6.098187     1.205493  12110.011237
                  min      18.000000    15.960000     0.000000   1121.873900
                  25%      27.000000    26.296250     0.000000   4740.287150
                  50%      39.000000    30.400000     1.000000   9382.033000
                  75%      51.000000    34.693750     2.000000  16639.912515
                  max      64.000000    53.130000     5.000000  63770.428010
                  
                  RangeIndex: 1338 entries, 0 to 1337
                  Data columns (total 7 columns):
                   #   Column    Non-Null Count  Dtype  
                  ---  ------    --------------  -----  
                   0   age       1338 non-null   int64  
                   1   sex       1338 non-null   object 
                   2   bmi       1338.000000    float64
                   3   children  1338 non-null   int64  
                   4   smoker    1338 non-null   object 
                   5   region    1338 non-null   object 
                   6   charges   1338.000000    float64
                  dtypes: float64(2), int64(2), object(3)
                  memory usage: 73.3+ KB
                  None
                  age         0
                  sex         0
                  bmi         0
                  children    0
                  smoker      0
                  region      0
                  charges     0
                  dtype: int64
                  0       False
                  1       False
                  2       False
                  3       False
                  4       False
                          ...  
                  1333    False
                  1334    False
                  1335    False
                  1336    False
                  1337    False
                  Length: 1338, dtype: bool
                    </pre>
                  </pre>
              </div>
            </div> 

            <div id="EDA_Plot" class="code-panel">
              <pre><code class="python">
          sns.displot(data = df["charges"])
          df['log_charges'] =  np.log(df['charges'])
          sns.displot(data = df['log_charges'])
              </code></pre>
              <div class="output-container">
                <span class="output-label">Out[1]:</span>
                <pre class="output-plot">
                  <img src="../projects/image/insurance_charges_dist1.png" alt="Insurance charges distribution 1" class="output-image">
                  <img src="../projects/image/insurance_charges_dist2.png" alt="Insurance charges distribution 2" class="output-image">
                </pre>
              </div>
            </div>
          </div>

          <h2 id="statistical-testing">Statistical Testing</h2>
            <p>
              I conducted hypothesis testing at a 95% confidence level to assess how key factors influence insurance charges. 
              This means the results are statistically reliable, with a low probability (5%) of observing the results by random chance alone.
            </p>
            
            <h3>Methodology Overview</h3>
            <p>
              Each testing approach was selected to match the specific hypothesis and data characteristics:
            </p>
            <ul>
              <li><strong>t-test:</strong> Used to compare means between two independent groups (smokers vs. non-smokers)</li>
              <li><strong>ANOVA:</strong> Applied to analyze variance across multiple groups (regions)</li>
              <li><strong>ANCOVA:</strong> Employed to assess interaction effects between continuous and categorical variables (BMI and smoking status)</li>
            </ul>
            
            <h3>Smoking Status Impact</h3>
            <p>
              A t-test comparing smokers vs. non-smokers revealed:
            </p>
            <ul>
              <li><strong>t-statistic: 46.35</strong></li>
              <li><strong>p-value: &lt; 0.00001</strong></li>
              <li>This confirms smoking status has an extremely significant impact on insurance charges</li>
            </ul>
            
            <h3>Regional Differences</h3>
            <p>
              ANOVA testing on regional variations showed:
            </p>
            <ul>
              <li><strong>F-statistic: 2.93</strong></li>
              <li><strong>p-value: 0.0328</strong></li>
              <li>A post-hoc Tukey HSD test identified that only the southeast vs. southwest comparison was significant (p = 0.0477)</li>
            </ul>
            
            <h3>BMI and Smoking Interaction</h3>
            <p>
              ANCOVA analysis revealed a powerful interaction between BMI and smoking:
            </p>
            <ul>
              <li><strong>Smoker effect: F = 3199.85, p &lt; 0.001</strong></li>
              <li><strong>BMI effect: F = 197.25, p &lt; 0.001</strong></li>
              <li><strong>Interaction effect: F = 433.13, p &lt; 0.001</strong></li>
              <li>This indicates that BMI not only impacts charges independently but also significantly amplifies the cost effect of smoking</li>
            </ul>
          
            <div class="chart-container">
              <img src="../projects/image/insurance_ancova.png" alt="Charges Distribution Visualization">
              <p>The combined effect of BMI and smoking status on charges</p>
            </div>
        
          
          <button class="code-toggle-btn" onclick="toggleCodeSection('statisticalCode')">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
              <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
              <path d="M6.854 4.646a.5.5 0 0 1 0 .708L4.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0zm2.292 0a.5.5 0 0 0 0 .708L11.793 8l-2.647 2.646a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708 0z"/>
            </svg>
            Show Statistical Testing Code
          </button>
          
          <div id="statisticalCode" class="code-content">
            <div class="code-tabs">
              <div class="code-tab active" onclick="changeCodeTab('ttest', this)">T-Test (Smokers)</div>
              <div class="code-tab" onclick="changeCodeTab('anova', this)">ANOVA (Regions)</div>
              <div class="code-tab" onclick="changeCodeTab('ancova', this)">ANCOVA (BMI & Smoking)</div>
            </div>
            
            <div id="ttest" class="code-panel active">
              <div class="code-title">T-Test</div>
              <pre><code class="python">
          # T-Test for comparing smokers vs non-smokers
          from scipy import stats
          smoker_charges = df.loc[df['smoker'] == 'yes', 'log_charges']
          non_smoker_charges = df.loc[df['smoker'] == 'no', 'log_charges']
          t_stat, p_value = stats.ttest_ind(smoker_charges, non_smoker_charges, equal_var=False)
          print(f"t-statistic: {t_stat}, p-value: {p_value}")
          
          
          plt.figure(figsize=(10, 6))
          ax = sns.boxplot(x='smoker', y='log_charges', data=df)
          sns.swarmplot(x='smoker', y='log_charges', data=df, color='black', alpha=0.5)
          y_max = df['log_charges'].max()
          plt.text(0.5, y_max * 1.05, f't-statistic: {t_stat:.3f}\np-value: {p_value:.5f}', 
                  horizontalalignment='center', size=12, weight='bold',
                  bbox=dict(facecolor='white', alpha=0.5))
          if p_value < 0.05:
              x1, x2 = 0, 1
              y = y_max * 1.1
              plt.plot([x1, x1, x2, x2], [y, y+0.05, y+0.05, y], lw=1.5, c='black')
              plt.text((x1+x2)*.5, y+0.07, '*' if p_value < 0.05 else '**' if p_value < 0.01 else '***', 
                      ha='center', va='bottom', color='black')
          plt.title('Comparison of log_charges between smokers and non-smokers')
          plt.ylabel('Log Charges')
          plt.xlabel('Smoker Status')
          plt.tight_layout()
          plt.show()
              </code></pre>
          
              <div class="output-container">
                <span class="output-label">Out[1]:</span>
                <pre class="output-text">t-statistic: <span class="output-number">46.34663745443287</span>
          p-value: <span class="output-number">6.784986731977081e-234</span></pre>
              </div>
            </div>
            
            <div id="anova" class="code-panel">
              <div class="code-title">ANOVA</div>
              <pre><code class="python">
          anova_model = ols('charges ~ C(region)', data=df).fit()
          anova_results = anova_lm(anova_model)
          print(anova_results)
              </code></pre>
          
              <div class="output-container">
                <span class="output-label">Out[1]:</span>
                <pre class="output-text">                df        sum_sq       mean_sq        F    PR(>F)
          C(region)     3.0  1.281906e+09  4.273019e+08  2.92614  0.032763
          Residual   1333.0  1.946569e+11  1.460292e+08      NaN       NaN</pre>
              </div>
          
              <div class="code-title">Tukey HSD</div>
              <pre><code class="python">
          tukey_result = pairwise_tukeyhsd(endog = df['charges'], groups = df['region'], alpha = 0.05)
          print(tukey_result)
              </code></pre>
              
              <div class="output-container">
                <span class="output-label">Out[2]:</span>
                <pre class="output-text">Multiple Comparison of Means - Tukey HSD, FWER=0.05       
          =================================================================
            group1    group2   meandiff  p-adj    lower      upper   reject
          -----------------------------------------------------------------
          northeast northwest  -955.5437 0.7457 -3397.7353  1486.648  False
          northeast southeast  1329.0269 0.4746 -1045.1237 3703.1776  False
          northeast southwest -1059.4471 0.6793 -3499.7595 1380.8652  False
          northwest southeast  2284.5706 0.0643     -89.58 4658.7212  False
          northwest southwest  -103.9035 0.9995 -2544.2158 2336.4088  False
          southeast southwest -2388.4741 0.0477 -4760.6915  -16.2567   True
          -----------------------------------------------------------------</pre>
              </div>
              
              <div class="code-title">Region Boxplot</div>
              <pre><code class="python">
          sns.boxplot(data = df, x= "region", y = df['charges'])
          plt.title("Boxplot by Region")
              </code></pre>
          
              <div class="output-container">
                <span class="output-label">Out[3]:</span>
                <pre class="output-plot">
                  <img src="../projects/image/insurance_anova.png" alt="Insurance region boxplot" class="output-image">
                </pre>
              </div>
            </div>
          
            <div id="ancova" class="code-panel">
              <div class="code-title">ANCOVA</div>
              <pre><code class="python">
          ancova_model = ols('charges ~ C(smoker) + bmi + C(smoker) * bmi', data=df).fit()
          ancova_results = anova_lm(ancova_model)
          print(ancova_results)
              </code></pre>
          
              <div class="output-container">
                <span class="output-label">Out[1]:</span>
                <pre class="output-text">                df        sum_sq       mean_sq            F        PR(>F)
          C(smoker)         1.0  1.214307e+11  1.214307e+11  3199.847642  0.000000e+00
          bmi               1.0  7.485235e+09  7.485235e+09   197.245054  6.890456e-42
          C(smoker):bmi     1.0  1.643697e+10  1.643697e+10   433.134192  1.590920e-83
          Residual       1333.0  5.058590e+10  3.794891e+07          NaN           NaN</pre>
              </div>
              
              <div class="code-title">BMI and Smoking Interaction</div>
              <pre><code class="python">
          n_non_smokers = len(non_smoker_charges)
          n_smokers = len(smoker_charges)
          df_plot = pd.DataFrame({
              'BMI': np.concatenate([df.loc[df['smoker'] == 'no', 'bmi'], 
                                    df.loc[df['smoker'] == 'yes', 'bmi']]),
              'Charges': np.concatenate([non_smoker_charges, smoker_charges]),
              'Smoker': ['No'] * n_non_smokers + ['Yes'] * n_smokers
          })
          
          plt.figure(figsize=(10, 6))
          sns.lineplot(data=df_plot, x='BMI', y='Charges', hue='Smoker', palette='Set1')
          plt.title('Interaction Between BMI and Smoking on Charges')
          plt.xlabel('BMI')
          plt.ylabel('Charges')
          plt.grid(True)
          plt.tight_layout()
          plt.show()
              </code></pre>
          
              <div class="output-container">
                <span class="output-label">Out[2]:</span>
                <pre class="output-plot">
                  <img src="../projects/image/insurance_ancova.png" alt="BMI and smoking interaction" class="output-image">
                </pre>
              </div>
            </div>
          </div>

          <h2 id="predictive-modeling">Predictive Modeling</h2>
          <p>
            To create a reliable pricing model, I developed and evaluated several predictive approaches, refining them to achieve the highest possible accuracy.
          </p>
          
          <h3>Linear Regression Challenges</h3>
          <p>
            Initial linear regression models revealed several challenges:
          </p>
          <ul>
            <li>The target variable (charges) showed significant non-linearity and heteroscedasticity</li>
            <li>Residuals were not normally distributed, violating key regression assumptions</li>
            <li>Box-Cox transformation improved the model but didn't fully resolve these issues</li>
          </ul>
          
          <h3>Polynomial Regression Solution</h3>
          <p>
            A polynomial regression model with carefully selected features and transformations achieved significantly better results:
          </p>
          <ul>
            <li><strong>R² = 0.864</strong> on the test set</li>
            <li><strong>RMSE = 0.295</strong> (on log-transformed charges)</li>
            <li>The model captured both the main effects and interactions between key variables</li>
          </ul>
          
          <h3>High-Cost Classification Model</h3>
          <p>
            To support risk screening, I developed a logistic regression model to identify potentially high-cost customers (top quartile):
          </p>
          <ul>
            <li><strong>AUC = 0.86</strong></li>
            <li><strong>Accuracy = 76%</strong></li>
            <li><strong>Precision = 0.275</strong>, <strong>Recall = 0.786</strong>, <strong>F1 = 0.407</strong></li>
            <li>Most influential predictors: smoker status, BMI, and sex</li>
          </ul>
          
          <!-- Visualization Placeholder for Classification Results -->
          <div class="chart-container">
            <img src="../projects/image/insurance_roc.png" alt="Charges Distribution Visualization">
            <p>Insurance charges showing significant right skew and bimodal pattern</p>
          </div>
          
          <button class="code-toggle-btn" onclick="toggleCodeSection('modelingCode')">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
              <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
              <path d="M6.854 4.646a.5.5 0 0 1 0 .708L4.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0zm2.292 0a.5.5 0 0 0 0 .708L11.793 8l-2.647 2.646a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708 0z"/>
            </svg>
            Show Modeling Code
          </button>
          
          <div id="modelingCode" class="code-content">
            <div class="code-tabs">
              <div class="code-tab active" onclick="changeCodeTab('polyRegression', this)">Polynomial Regression</div>
              <div class="code-tab" onclick="changeCodeTab('logisticRegression', this)">Logistic Regression</div>
              <div class="code-tab" onclick="changeCodeTab('FeaturesExtraction', this)">Features Extraction</div>
            </div>
            
            <!-- First Panel: Polynomial Regression -->
            <div id="polyRegression" class="code-panel active">
              <div class="code-title">Polynomial Regression</div>
              <pre><code class="python">
                dfr3 = df.copy()
                dfr3 = dfr3.drop_duplicates()
                dfr3 = dfr3.dropna()
  
                dfr3['charges_boxcox'], fitted_lambda = stats.boxcox(dfr3['charges'])
                X = dfr3[['age', 'bmi', 'children', 'sex', 'smoker', 'region']]
                y = dfr3['charges_boxcox']
                X_train, X_test, y_train, y_test = train_test_split(X,y, test_size= 0.2, random_state= 42)
  
                categorical_cols = ['sex', 'smoker', 'region']
                numeric_cols = [col for col in X_train.columns if col not in categorical_cols]
  
                preprocessor = ColumnTransformer(
                    transformers=[
                        ('num', make_pipeline(PolynomialFeatures(degree=2, include_bias=False)), numeric_cols),
                        ('cat', OneHotEncoder(drop='first'), categorical_cols)
                    ])
  
                pipeline = make_pipeline(preprocessor, LinearRegression())
                pipeline.fit(X_train, y_train)
                polynomial_features = pipeline.named_steps['columntransformer'].named_transformers_['num'].named_steps['polynomialfeatures']
                feature_names = polynomial_features.get_feature_names_out(numeric_cols)
                print("Polynomial Features:", feature_names)
                coefficients = pipeline.named_steps['linearregression'].coef_
                print("Coefficients:", coefficients)
  
                y_pred = pipeline.predict(X_test)
                print(f"R^2 Score: {r2_score(y_test, y_pred)}")
                print(f"MAE: {mean_absolute_error(y_test, y_pred)}")
                print(f"RMSE: {np.sqrt(((y_pred - y_test) ** 2).mean())}")
              </code></pre>
              <div class="output-container">
                <span class="output-label">Out[1]:</span>
                <pre class="output-text">
                  Polynomial Features: ['age' 'bmi' 'children' 'age^2' 'age bmi' 'age children' 'bmi^2'
                  'bmi children' 'children^2']
                 Coefficients: [ 6.83609214e-02  9.86677879e-02  4.13113606e-01 -1.33762222e-04
                  -1.04395027e-04 -6.87662938e-03 -1.21090630e-03  1.81069503e-03
                  -1.76705898e-02 -1.17781624e-01  2.32382619e+00 -7.16227728e-02
                  -1.73474541e-01 -1.46574344e-01]
                 R^2 Score: 0.834971922647911
                 MAE: 0.39560095285526164
                 RMSE: 0.5821801136455046
                </pre>
              </div>
              
              <!--  a second code block with output -->
              <div class="code-title">Visualization</div>
              <pre><code class="python">
                residuals = y_test - y_pred
                fig , axes = plt.subplots(1,2,figsize=(10,5))
                sns.residplot(x=y_pred, y = residuals, lowess=True, line_kws={'color': 'red'}, ax = axes[0])
                axes[0].set_xlabel("Fitted Values (Predicted Charges)")
                axes[0].set_ylabel("Residuals")
                axes[0].set_title("Residual Plot")
                axes[0].axhline(0, color='black', linestyle='--')
                stats.probplot(residuals, dist="norm", plot = axes[1])
                axes[1].set_title("Q-Q Plot of Residuals")
                axes[1].set_xlabel("Theoretical Quantiles")
                axes[1].set_ylabel("Ordered Residuals")
                plt.show()
              </code></pre>
              
              <div class="output-container">
                <span class="output-label">Out[2]:</span>
                <pre class="output-plot">
                  <img src="../projects/image/insurance_lr3.png" alt="resident plot" class="output-image">
                </pre>
              </div>
            </div>
            
            <!-- Second Panel: Logistic Regression -->
            <div id="logisticRegression" class="code-panel">
              <div class="code-title">Logistic Regression</div>
              <pre><code class="python">
                q1,q3 = np.quantile(df['charges'], [0.25,0.75])
                iqr = q3-q1
                high_cost = q3+(1.5*iqr)
                higt_cost_proportion = len(df[(df.charges > high_cost)]) / len(df) * 100
                
                df2 = df.copy()
                df2['is_high_charge'] = (df2['charges'] >= high_cost).astype(int)

                encoder = OneHotEncoder(drop = 'first', sparse_output=False) 
                encoded_data = encoder.fit_transform(df[["region", "sex", "smoker"]])
                encoded_df = pd.DataFrame(
                    encoded_data,
                    columns=encoder.get_feature_names_out(["region", "sex", "smoker"])
                )
                logis_df = pd.concat([df2.drop(["region", "sex", "smoker"], axis=1), encoded_df], axis=1)
                logis_df.isna().sum()
                logis_df = logis_df.dropna()

                X = logis_df[['age', 'bmi', 'children', 'region_northwest',
                      'region_southeast', 'region_southwest', 'sex_male', 'smoker_yes']]
                y = logis_df['is_high_charge']
                X_train, X_test, y_train, y_test = train_test_split(X,y, test_size= 0.2, random_state= 42, stratify= y)
              
                pipeline = make_pipeline(
                StandardScaler(),
                LogisticRegression(class_weight='balanced' , max_iter=1000)
                )
                pipeline.fit(X_train, y_train)
                y_pred = pipeline.predict(X_test)
                y_prob = pipeline.predict_proba(X_test)[:, 1] 
                print("Accuracy:", accuracy_score(y_test, y_pred))
                print("Precision:", precision_score(y_test, y_pred))
                print("Recall:", recall_score(y_test, y_pred))
                print("F1 Score:", f1_score(y_test, y_pred))
              
              
              </code></pre>
              
              <div class="output-container">
                <span class="output-label">Out[1]:</span>
                <pre class="output-text">
                  Accuracy: 0.7611940298507462
                  Precision: 0.275
                  Recall: 0.7857142857142857
                  F1 Score: 0.40740740740740744
                </pre>
              </div>
              
              <!-- a second code block with output -->
              <div class="code-title">Confusion Metrix</div>
              <pre><code class="python">
                cm = confusion_matrix(y_test, y_pred)
                disp = ConfusionMatrixDisplay(confusion_matrix=cm, display_labels=["False", "True"])
                disp.plot(cmap='Blues', values_format='d')
                plt.title("Confusion Matrix")
                plt.grid(False)
                plt.show()
              </code></pre>
              
              <div class="output-container">
                <span class="output-label">Out[2]:</span>
                <pre class="output-plot">
                  <img src="../projects/image/insurance_cm.png" alt="slightly high flase positive, futher engineering might needed to improve the Precision score" class="output-image">
                </pre>
              </div>

              <div class="code-title">ROC curve</div>
              <pre><code class="python">
                fpr, tpr, thresholds = roc_curve(y_test, y_prob)
                auc = roc_auc_score(y_test, y_prob)
                plt.plot(fpr, tpr, label=f"AUC = {auc:.2f}")
                plt.plot([0, 1], [0, 1], linestyle='--', color='gray')
                plt.xlabel('False Positive Rate')
                plt.ylabel('True Positive Rate')
                plt.title('ROC Curve')
                plt.legend()
                plt.grid(True)
                plt.show()
              </code></pre>
              
              <div class="output-container">
                <span class="output-label">Out[2]:</span>
                <pre class="output-plot">
                  <img src="../projects/image/insurance_roc.png" alt="ROC Curve shows promising signs" class="output-image">
                </pre>
              </div>
            </div>
            
            <!-- Third Panel: Model Evaluation -->
            <div id="FeaturesExtraction" class="code-panel">
              <div class="code-title">Model Evaluation</div>
              <pre><code class="python">
                feature_names = X_train.columns.tolist()
                logistic_model = pipeline.named_steps['logisticregression']
                coefficients = logistic_model.coef_[0] 
                coef_df = pd.DataFrame({
                    'Feature': feature_names,
                    'Coefficient': coefficients
                })
                coef_df['Abs_Coefficient'] = np.abs(coef_df['Coefficient'])
                coef_df_sorted = coef_df.sort_values('Abs_Coefficient', ascending=False)
                print(coef_df_sorted)
              </code></pre>
              
              <div class="output-container">
                <span class="output-label">Out[1]:</span>
                <pre class="output-text">
                  Feature  Coefficient  Abs_Coefficient
                  1               bmi     1.259405         1.259405
                  7        smoker_yes     0.830175         0.830175
                  4  region_southeast    -0.289696         0.289696
                  6          sex_male     0.208010         0.208010
                  0               age     0.187789         0.187789
                  5  region_southwest    -0.154147         0.154147
                  3  region_northwest     0.125632         0.125632
                  2          children    -0.064070         0.064070
                </pre>
              </div>
              
              <!-- a second code block with output -->
              <div class="code-title">Comparison Plot</div>
              <pre><code class="python">
                plt.figure(figsize=(12, 8))
                plt.barh(coef_df_sorted['Feature'], coef_df_sorted['Coefficient'])
                plt.xlabel('Coefficient Value')
                plt.ylabel('Feature')
                plt.title('Logistic Regression Coefficients')
                plt.axvline(x=0, color='black', linestyle='-', alpha=0.3)
                plt.tight_layout()
                #plt.savefig(r'/Users/itt/Documents/Data Projects/Insurance/image/logis_coor.png', dpi=300)
                plt.show()
                plt.close() 
              </code></pre>
              
              <div class="output-container">
                <span class="output-label">Out[2]:</span>
                <pre class="output-plot">
                  <img src="../projects/image/insurance_logis_coor.png" alt="Description" class="output-image">
                </pre>
              </div>
            </div>
          </div>
          
          <h2 id="customer-segmentation">Customer Segmentation</h2>
          <p>
            To enable targeted marketing and pricing strategies, I performed customer segmentation using KMeans clustering with careful feature selection and preprocessing.
          </p>
          
          <h3>Clustering Approach</h3>
          <p>
            The clustering analysis involved:
          </p>
          <ul>
            <li>Selecting an optimal number of clusters (k=4) using the elbow method</li>
            <li>Using principal component analysis (PCA) for dimensionality reduction and visualization</li>
            <li>Standardizing features to ensure equal weighting in the clustering process</li>
          </ul>
          
          <!-- Visualization Placeholder for Customer Clusters -->
          <div class="chart-container">
            <img src="../projects/image/insurance_pca.png" alt="Charges Distribution Visualization">
            <p>Customer Segmentation Visualization showing the four distinct customer clusters based on PCA</p>
          </div>
          
          <h3>Cluster Profiles</h3>
          <p>
            The analysis revealed four distinct customer segments, each with unique characteristics:
          </p>
          
          <table class="data-table">
            <thead>
              <tr>
                <th>Cluster</th>
                <th>Age</th>
                <th>BMI</th>
                <th>Children</th>
                <th>Charges</th>
                <th>Smoker Rate</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>0</td>
                <td>40.1</td>
                <td>30.0</td>
                <td>2.7</td>
                <td>$10,969</td>
                <td>12.3%</td>
              </tr>
              <tr>
                <td>1</td>
                <td>25.4</td>
                <td>29.2</td>
                <td>0.4</td>
                <td>$5,431</td>
                <td>10.0%</td>
              </tr>
              <tr>
                <td>2</td>
                <td>39.4</td>
                <td>35.3</td>
                <td>1.1</td>
                <td>$41,056</td>
                <td>95.5%</td>
              </tr>
              <tr>
                <td>3</td>
                <td>52.5</td>
                <td>31.0</td>
                <td>0.4</td>
                <td>$12,788</td>
                <td>9.9%</td>
              </tr>
            </tbody>
          </table>
          
        <h3>Segment Descriptions</h3>
        <div class="results-grid">
          <div class="result-card">
            <h4>👨‍👩‍👧‍👦 Cluster 0: Family-Oriented</h4>
            <p>Middle-aged families with multiple children. They show moderate BMI and are mostly non-smokers. Their charges are mid-range, suggesting typical health plan users with some dependents.</p>
            <div class="stat">40.1</div>
            <p>Average age (years)</p>
          </div>
          <div class="result-card">
            <h4>🧑‍🎓 Cluster 1: Young Adults</h4>
            <p>Young adults with few or no children. Low average charges and low smoker rate. Ideal candidates for low-tier or digital-first health plans.</p>
            <div class="stat">$5,431</div>
            <p>Average annual charges</p>
          </div>
          <div class="result-card">
            <h4>🚬 Cluster 2: High-Risk</h4>
            <p>High-risk individuals with the highest charges, elevated BMI, and a smoker rate over 95%. This group would be most impacted by lifestyle-based pricing adjustments.</p>
            <div class="stat">95.5%</div>
            <p>Smoker rate</p>
          </div>
          <div class="result-card">
            <h4>🧓 Cluster 3: Older Adults</h4>
            <p>Older adults with no children, moderately high BMI, and mid-to-high charges. Their profile aligns with individuals nearing or in retirement.</p>
            <div class="stat">52.5</div>
            <p>Average age (years)</p>
          </div>
        </div>
          
          <button class="code-toggle-btn" onclick="toggleCodeSection('clusteringCode')">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
              <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
              <path d="M6.854 4.646a.5.5 0 0 1 0 .708L4.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0zm2.292 0a.5.5 0 0 0 0 .708L11.793 8l-2.647 2.646a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708 0z"/>
            </svg>
            Show Clustering Code
          </button>
          
          <div id="clusteringCode" class="code-content">
            <div class="code-tabs">
              <div class="code-tab active" onclick="changeCodeTab('elbowMethod', this)">Elbow Method</div>
              <div class="code-tab" onclick="changeCodeTab('kmeansClustering', this)">KMEANS Clustering</div>
              <div class="code-tab" onclick="changeCodeTab('getCluster', this)">Clusters Attributes</div>
            </div>
              
              <!-- First Panel -->
              <div id="elbowMethod" class="code-panel active">
                <div class="code-title">Elbow Method</div>
                <pre><code class="python">
                  df3 = df2.copy()
                  df3 = df3.drop_duplicates()
                  df3 = df3.dropna()
                  df3 = df3.drop(["log_charges", "is_high_charge"], axis=1)

                  numeric_cols = ['age', 'bmi', 'children', 'charges']  
                  categorical_cols = ['sex', 'smoker', 'region']

                  preprocessor = ColumnTransformer(
                  transformers=[
                      ('num', StandardScaler(), numeric_cols),
                      ('cat', OneHotEncoder(drop='first'), categorical_cols)
                        ]
                    )

                    inertias = []

                    for i in range(1, 11):
                        kmean_pipe = make_pipeline(preprocessor, KMeans(n_clusters=i, random_state=42))
                        kmean_pipe.fit(df3)
                        inertia = kmean_pipe.named_steps['kmeans'].inertia_
                        inertias.append(inertia)

                    plt.plot(range(1, 11), inertias, marker='o')
                    plt.xlabel('Number of Clusters (k)')
                    plt.ylabel('Inertia')
                    plt.title('Elbow Method for Optimal k')
                    plt.grid(True)
                    #plt.savefig(r'/Users/itt/Documents/Data Projects/Insurance/image/elbow.png', dpi=300)
                    plt.show()
                    plt.close() 

                </code></pre>
                
                <div class="output-container">
                  <span class="output-label">Out[2]:</span>
                  <pre class="output-plot">
                    <img src="../projects/image/insurance_elbow.png" alt="Description" class="output-image">
                  </pre>
                </div>
              </div>
              
              <!-- Second Panel-->
              <div id="kmeansClustering" class="code-panel">
                <div class="code-title">KMEANS Clustering</div>
                <pre><code class="python">
                  kmeans = make_pipeline(preprocessor, KMeans(n_clusters=4, random_state=42))
                  kmeans.fit(df3)
                  X_transformed = preprocessor.fit_transform(df3)
                  X_pca = PCA(n_components=2).fit_transform(X_transformed)
                  cluster_labels = kmeans.named_steps['kmeans'].labels_
                  
                  plt.figure(figsize=(8, 6))
                  scatter = plt.scatter(X_pca[:, 0], X_pca[:, 1], c=cluster_labels, cmap='Set1', alpha=0.7)
                  # plt.xlabel('PCA Component 1')
                  # plt.ylabel('PCA Component 2')
                  plt.title('KMeans Clusters (k=4)')
                  plt.colorbar(scatter, label='Cluster Label')
                  plt.grid(True)
                  #plt.savefig(r'/Users/itt/Documents/Data Projects/Insurance/image/pca.png', dpi=300)
                  plt.show()
                  plt.close() 
                </code></pre>
                
                <div class="output-container">
                  <span class="output-label">Out[2]:</span>
                  <pre class="output-plot">
                    <img src="../projects/image/insurance_pca.png" alt="Description" class="output-image">
                  </pre>
                </div>
              </div>
              
              <!-- Third Panel: Model Evaluation -->
              <div id="getCluster" class="code-panel">
                <div class="code-title">Clusters Attributes</div>
                <pre><code class="python">
                  df3_clustered = df3.copy()
                  df3_clustered['cluster'] = cluster_labels
                  cluster_profile_full = df3_clustered.groupby('cluster').agg({
                      'age': 'mean',
                      'bmi': 'mean',
                      'children': 'mean',
                      'charges': 'mean',
                      'smoker': lambda x: x.value_counts(normalize=True).to_dict(),  
                      'sex': lambda x: x.value_counts(normalize=True).to_dict(),
                      'region': lambda x: x.value_counts(normalize=True).to_dict()
                  }).round(2)
                  
                  cluster_profile_full
                </code></pre>
                
                <div class="output-container">
                  <span class="output-label">Out[1]:</span>
                  <pre class="output-text">
                    cluster	age	bmi	children	charges	smoker	sex	region
                    0	40.11	30.01	2.69	10969.23	{'no': 0.8767908309455588, 'yes': 0.12320916905444126}	{'female': 0.504297994269341, 'male': 0.49570200573065903}	{'northwest': 0.2808022922636103, 'southwest': 0.2492836676217765, 'northeast': 0.23782234957020057, 'southeast': 0.23209169054441262}
                    1	25.38	29.18	0.42	5430.9	{'no': 0.9, 'yes': 0.1}	{'female': 0.5119047619047619, 'male': 0.4880952380952381}	{'southeast': 0.28809523809523807, 'northwest': 0.2523809523809524, 'northeast': 0.2357142857142857, 'southwest': 0.22380952380952382}
                    2	39.35	35.33	1.1	41056.03	{'yes': 0.9548387096774194, 'no': 0.04516129032258064}	{'male': 0.6451612903225806, 'female': 0.3548387096774194}	{'southeast': 0.3870967741935484, 'southwest': 0.23225806451612904, 'northeast': 0.2064516129032258, 'northwest': 0.17419354838709677}
                    3	52.5	30.98	0.43	12787.55	{'no': 0.9007263922518159, 'yes': 0.09927360774818401}	{'female': 0.5230024213075061, 'male': 0.47699757869249393}	{'northeast': 0.26634382566585957, 'southwest': 0.26150121065375304, 'southeast': 0.2469733656174334, 'northwest': 0.22518159806295399}
                  </pre>
                </div>
              </div>
            </div>
          
          <h2 id="strategic-implications">Strategic Implications</h2>
          <p>
            The analysis and modeling results provide several actionable strategic opportunities for the insurance provider:
          </p>
          
          <h3>Personalized Pricing Strategy</h3>
          <ul>
            <li><strong>Pricing Engine:</strong> Deploy the polynomial regression model as a pricing tool to generate data-driven quote estimates</li>
            <li><strong>Risk-Based Pricing:</strong> Implement tiered pricing based on the significant risk factors identified (smoking status, BMI, age)</li>
            <li><strong>Targeted Discounts:</strong> Offer conditional discounts for lifestyle improvements that directly impact costs (e.g., smoking cessation programs)</li>
          </ul>
          
          <h3>Customer Segment-Specific Approaches</h3>
          <p>
            Each identified segment requires a tailored strategy:
          </p>
          <ul>
            <li><strong>Cluster 1 (Young Adults):</strong> Develop entry-tier plans with digital-first options and preventive care focus</li>
            <li><strong>Cluster 0 (Family-Oriented):</strong> Create family bundle plans with dependent coverage and school health partnership options</li>
            <li><strong>Cluster 3 (Older Adults):</strong> Design age-focused plans with expanded prescription coverage and chronic condition management</li>
            <li><strong>Cluster 2 (High-Risk):</strong> Implement premium plans with wellness program incentives and lifestyle coaching to mitigate costs</li>
          </ul>
          
          <h3>Customer Acquisition & Retention</h3>
          <ul>
            <li><strong>Risk Screening:</strong> Apply the logistic regression classifier to identify high-risk applicants for additional underwriting</li>
            <li><strong>Targeted Marketing:</strong> Focus acquisition efforts on the most profitable customer segments</li>
            <li><strong>Retention Programs:</strong> Develop loyalty incentives tied to improved health metrics for high-risk customers</li>
          </ul>
          
          <h2 id="conclusion">Conclusion</h2>
          <p>
            This analysis provides a comprehensive understanding of insurance cost drivers and customer segments, offering a foundation for data-driven decision-making in pricing, product development, and marketing strategies.
          </p>
          <p>
            Key takeaways include:
          </p>
          <ul>
            <li>Smoking status is the single most influential factor affecting insurance costs, with smokers paying 278% more on average</li>
            <li>BMI has a synergistic effect with smoking, creating a compounding risk profile for certain customers</li>
            <li>Age remains a significant predictor of cost, but its impact varies greatly by segment</li>
            <li>The four identified customer segments provide clear guidance for targeted product development and marketing</li>
            <li>The predictive model achieves strong accuracy (R² = 0.86) suitable for production deployment in pricing systems</li>
          </ul>
          
          <p>
            By implementing the recommendations from this analysis, the insurance provider can potentially increase profitability while developing more personalized and competitive offerings for different customer segments.
          </p>
        </div>

        
      <!-- Sidebar -->
      <div class="sidebar">
        <div class="sidebar-box">
          <h3 class="sidebar-title">Table of Contents</h3>
          <ul class="table-of-contents">
            <li><a href="#overview">Executive Summary</a></li>
            <li><a href="#business-context">Business Context & Objectives</a></li>
            <li><a href="#data-overview">Data Overview</a></li>
            <li><a href="#exploratory-analysis">Exploratory Analysis</a></li>
            <li><a href="#statistical-testing">Statistical Testing</a></li>
            <li><a href="#predictive-modeling">Predictive Modeling</a></li>
            <li><a href="#customer-segmentation">Customer Segmentation</a></li>
            <li><a href="#strategic-implications">Strategic Implications</a></li>
            <li><a href="#conclusion">Conclusion</a></li>
          </ul>
        </div>
      
        <div class="sidebar-box">
          <h3 class="sidebar-title">Technologies Used</h3>
          <div class="tech-list">
            <span class="tech-tag">Linear Regression</span>
            <span class="tech-tag">Logistic Regression</span>
            <span class="tech-tag">KMean Clustering</span>
            <span class="tech-tag">Python</span>
            <span class="tech-tag">Pandas</span>
            <span class="tech-tag">Scikit-learn</span>
            <span class="tech-tag">Statsmodels</span>
            <span class="tech-tag">Seaborn</span>
            <span class="tech-tag">Matplotlib</span>
            <span class="tech-tag">Jupyter</span>
          </div>
      
          <div class="project-links">
            <a href="https://github.com/sphoom/portfolio/tree/main/code/insurance" class="project-btn btn-secondary">GitHub Repository</a>
          </div>
        </div>
      </div>

  </div> <!-- Close .project-content -->
  <!-- Related Projects -->
  <h2 class="related-projects-title">Related Projects</h2>
  <div class="related-projects">
    <a href="../projects/airline.html" class="related-card">
      <div class="related-img" style="background-image: url('../projects/image/airline_banner.png'); background-size: cover; background-position: center; height: 160px;">
		</div>
      <div class="related-content">
        <h3 class="related-title">Customer Segmentation & Retention: Insights from Loyalty Analytics</h3>
        <p class="related-desc">Analysis of Northern Lights Air's loyalty program using statistical testing and clustering techniques to identify key customer segments and optimize retention strategies.</p>
      </div>
    </a>
    
    
  <a href="../projects/visual_sales.html" class="related-card">
    <div class="related-img" style="background-image: url('../projects/image/visual_sales_banner.png'); background-size: cover; background-position: center; height: 160px;">
    </div>
    <div class="related-content">
      <h3 class="related-title">PowerBI Sales Performance Dashboard</h3>
      <p class="related-desc">Creating interactive dashboard visualizing sales metrics by customers and product category.</p>
    </div>
  </a>
        
    <a href="../projects/lp_logistics.html" class="related-card">
      <div class="related-img" style="background-image: url('../projects/image/lp_logist_banner.png'); background-size: cover; background-position: center; height: 160px;">
			</div>
      <div class="related-content">
        <h3 class="related-title">Supply Chain Network Optimization</h3>
        <p class="related-desc">Multi-stage linear programming model that optimizes production allocation, transportation routes, and shipping modes across Southeast Asia, reducing costs by 15.31% during fuel price surges.</p>
      </div>
    </a>
  </div>
  
  <!-- Footer -->
  <footer class="footer">
    <p>© 2025 Somphoom M.</p>
  </footer>
</div>

<script>
  // Fixed toggle section functionality
  function toggleCodeSection(sectionId) {
    const section = document.getElementById(sectionId);
    const mainContent = document.querySelector('.main-content');
    
    // Store current scroll position
    const scrollPos = window.scrollY;
    
    if (section.style.display === 'block') {
      section.style.display = 'none';
    } else {
      section.style.display = 'block';
      
      // Explicitly enforce main-content overflow settings
      if (mainContent) {
        mainContent.style.overflowX = 'hidden';
        mainContent.style.maxWidth = '100%';
      }
      
      // Apply syntax highlighting
      if (typeof hljs !== 'undefined') {
        section.querySelectorAll('pre code').forEach((block) => {
          hljs.highlightBlock(block);
        });
      }
    }
    
    // Restore scroll position
    window.scrollTo(0, scrollPos);
  }

  function changeCodeTab(panelId, tabElement) {
    // Store current scroll position
    const scrollPos = window.scrollY;
    
    // Get the code content container
    const codeContent = tabElement.closest('.code-content');
    
    // Hide all panels
    const panels = codeContent.getElementsByClassName('code-panel');
    for (let i = 0; i < panels.length; i++) {
      panels[i].classList.remove('active');
    }
    
    // Deactivate all tabs
    const tabs = tabElement.parentElement.getElementsByClassName('code-tab');
    for (let i = 0; i < tabs.length; i++) {
      tabs[i].classList.remove('active');
    }
    
    // Activate selected tab and panel
    document.getElementById(panelId).classList.add('active');
    tabElement.classList.add('active');
    
    // Restore scroll position
    window.scrollTo(0, scrollPos);
  }

  // Initialize on page load
  document.addEventListener('DOMContentLoaded', (event) => {
    // Set code content sections to hidden by default
    const codeSections = document.querySelectorAll('.code-content');
    codeSections.forEach(section => {
      section.style.display = 'none';
    });
    
    // Apply syntax highlighting if available
    if (typeof hljs !== 'undefined') {
      document.querySelectorAll('pre code').forEach((block) => {
        hljs.highlightBlock(block);
      });
    }
    
    // Ensure main content has overflow set
    const mainContent = document.querySelector('.main-content');
    if (mainContent) {
      mainContent.style.overflowX = 'hidden';
      mainContent.style.maxWidth = '100%';
    }
  });
</script>
</body>
</html>
